{"remainingRequest":"C:\\00_WORK\\workspace\\vue_frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\00_WORK\\workspace\\vue_frontend\\src\\views\\vcode\\InsertAcnt.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\00_WORK\\workspace\\vue_frontend\\src\\views\\vcode\\InsertAcnt.vue","mtime":1594613997919},{"path":"C:\\00_WORK\\workspace\\vue_frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\00_WORK\\workspace\\vue_frontend\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\00_WORK\\workspace\\vue_frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\00_WORK\\workspace\\vue_frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\00_WORK\\workspace\\vue_frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnDQppbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCcNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ0RlcHRQbGFuZG8nLA0KICBkYXRhICgpIHsNCiAgICByZXR1cm4gew0KICAgICAgc2VsZWN0ZWRZZWFyOiAnJywNCiAgICAgIGNhbGxZZWFyczogW10sDQogICAgICBjaGVja2VkOiBmYWxzZSwNCiAgICAgIGlzSGlkZGVuOiBbXSwNCiAgICAgIHBvSnNvbjogW10sDQogICAgICBzZWFyY2hZZWFyOiBbXSwNCiAgICAgIHNlbF9zZWFyY2hZZWFyOiBtb21lbnQobmV3IERhdGUoKSkuZm9ybWF0KCd5eXl5JyksDQogICAgICB2aXNpYmxlOiBmYWxzZSwNCiAgICAgIHRlbXBEYXRhOiB7DQogICAgICAgIHVzZXJJZDogJycsDQogICAgICAgIHVzZXJOYW1lOiAnJywNCiAgICAgICAgc2VsWWVhcjogJycNCiAgICAgIH0sDQogICAgICBkYXlPZmZMaXN0OiB7DQogICAgICAgIGVhY2hNZW1iZXI6IHsNCiAgICAgICAgICBpZDogJycsDQogICAgICAgICAgbmFtZTogJycsDQogICAgICAgICAgYWNudDogJycsDQogICAgICAgICAgc3VtTWludXNEYXlvZmY6ICcnDQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQogIH0sDQogIG1vdW50ZWQ6IGZ1bmN0aW9uICgpIHsNCiAgICB0aGlzLmdldENhbGVuZGFyWWVhcigpDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBnZXRDYWxlbmRhclllYXI6IGZ1bmN0aW9uICgpIHsgLy8g7LqY66aw642UIOuFhOuPhCDsoJXrs7Qg6rCA7KC47Jik6riwDQogICAgICBheGlvcw0KICAgICAgICAuZ2V0KCcvYXBpL3ZhY2F0aW9uL3NlbGVjdENhbGVuZGFyWWVhcicpDQogICAgICAgIC50aGVuKHJlcyA9PiB7DQogICAgICAgICAgY29uc3QgeWVhciA9IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKQ0KICAgICAgICAgIGZvciAoY29uc3QgaSBpbiByZXMuZGF0YS5kYXRhKSB7DQogICAgICAgICAgICB0aGlzLmNhbGxZZWFycy5wdXNoKHJlcy5kYXRhLmRhdGFbaV0ueWVhcikNCiAgICAgICAgICAgIGlmIChTdHJpbmcoeWVhcikgPT09IFN0cmluZyh0aGlzLmNhbGxZZWFyc1tpXSkpIHsNCiAgICAgICAgICAgICAgdGhpcy5jYWxsWWVhcnMuc3BsaWNlKGksIDEpDQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICAgIHRoaXMuY2FsbFllYXJzLnNvcnQoKQ0KICAgICAgICAgIHRoaXMuY2FsbFllYXJzLnVuc2hpZnQoU3RyaW5nKHllYXIpKQ0KICAgICAgICAgIGlmICh0aGlzLmNhbGxZZWFyc1swXSAhPT0gJycpIHsNCiAgICAgICAgICAgIHRoaXMuc2VsX3NlYXJjaFllYXIgPSB0aGlzLmNhbGxZZWFyc1swXQ0KICAgICAgICAgIH0NCiAgICAgICAgfSkuY2F0Y2goKCkgPT4gew0KICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGVycm9yKQ0KICAgICAgICAgIGFsZXJ0KCfsmKTrpZjqsIAg67Cc7IOd7ZWY7JiA7Iq164uI64ukLiDsi5zsiqTthZwg6rSA66as7J6Q7JeQ6rKMIOusuOydmO2VmOyEuOyalC4nKQ0KICAgICAgICB9KQ0KICAgIH0sDQogICAgLy8g7YG066at7IucIOyduO2Si+uwleyKpOuhnCDrsJTrgJwNCiAgICBjbGtSb3c6IGZ1bmN0aW9uIChpKSB7DQogICAgICBjb25zdCBlZGl0Q2hrID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoJ2VkaXRDaGsnKQ0KICAgICAgY29uc3QgZWRpdENoa0FsbCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCdlZGl0Q2hrQWxsJykNCiAgICAgIHZhciBuYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoJ25hbWUnKQ0KICAgICAgaWYgKGkgPT09ICdBbGwnKSB7DQogICAgICAgIGZvciAobGV0IGxnaCA9IDA7IGxnaCA8IG5hbWUubGVuZ3RoOyBsZ2grKykgew0KICAgICAgICAgIHRoaXMuJHNldCh0aGlzLmlzSGlkZGVuLCBsZ2gsIGVkaXRDaGtBbGxbMF0uY2hlY2tlZCkNCiAgICAgICAgICBlZGl0Q2hrW2xnaF0uY2hlY2tlZCA9IGVkaXRDaGtBbGxbMF0uY2hlY2tlZA0KICAgICAgICB9DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLiRzZXQodGhpcy5pc0hpZGRlbiwgaSwgIXRoaXMuaXNIaWRkZW5baV0pDQogICAgICB9DQogICAgfSwNCiAgICAvKiDsl7DssKgg67Cc7IOdIOyggOyepSAqLw0KICAgIGluc2VydEFjbnQ6IGZ1bmN0aW9uICgpIHsNCiAgICAgIC8vIGNvbnNvbGUubG9nKCdzZWxfc2VhcmNoWWVhciA6OiAnLCB0aGlzLnNlbF9zZWFyY2hZZWFyKQ0KICAgICAgdmFyIGlucHV0QWNudCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCdhY250JykNCiAgICAgIHZhciBpbnB1dElkID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoJ2lkJykNCiAgICAgIC8vIGNvbnNvbGUubG9nKCdpbnB1dEFjbnQgOjogJywgaW5wdXRBY250KQ0KICAgICAgLy8gY29uc29sZS5sb2coJ2lucHV0QWNudFtpXS52YWx1ZSA6OiAnLCBpbnB1dEFjbnRbMF0udmFsdWUpDQogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGlucHV0QWNudC5sZW5ndGg7IGkrKykgew0KICAgICAgICAvLyBjb25zb2xlLmxvZygnaW5wdXRJZFtpXS52YWx1ZSA6OiAnLCBpbnB1dElkW2ldLnZhbHVlKQ0KICAgICAgICAvLyBjb25zb2xlLmxvZygnaW5wdXRBY250W2ldLnZhbHVlIDo6ICcsIGlucHV0QWNudFtpXS52YWx1ZSkNCiAgICAgICAgdmFyIGluc2VydEFjbnRMaXN0ID0gew0KICAgICAgICAvLyAgIGlkOiB0aGlzLmRheU9mZkxpc3RbaV0uaWQsDQogICAgICAgICAgaWQ6IGlucHV0SWRbaV0udmFsdWUsDQogICAgICAgICAgeWVhcjogdGhpcy5zZWxfc2VhcmNoWWVhciwNCiAgICAgICAgICBhX2NudDogaW5wdXRBY250W2ldLnZhbHVlDQogICAgICAgIH0NCiAgICAgICAgdGhpcy5wb0pzb24ucHVzaChpbnNlcnRBY250TGlzdCkNCiAgICAgIH0NCiAgICAgIGF4aW9zLnBvc3QoJy9hcGkvZGVwdE1lbWJlci9pbnNlcnRBY250JywgdGhpcy5wb0pzb24pDQogICAgICAgIC50aGVuKChyZXN1bHQpID0+IHsNCiAgICAgICAgICAvLyBjb25zb2xlLmxvZygnc2VsZWN0QWxsTWVtYmVyc0RheU9mZkxpc3QgcmVzdWx0IDogJywgcmVzdWx0LmRhdGEuZGF0YSkNCiAgICAgICAgICB0aGlzLmRheU9mZkxpc3QgPSByZXN1bHQuZGF0YS5kYXRhDQogICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpDQogICAgICAgIH0pLmNhdGNoKCgpID0+IHsNCiAgICAgICAgICAvLyBjb25zb2xlLmxvZygnZXJyb3InLCBlcnJvcikNCiAgICAgICAgICBhbGVydCgn7Jik66WY6rCAIOuwnOyDne2VmOyYgOyKteuLiOuLpC4g7Iuc7Iqk7YWcIOq0gOumrOyekOyXkOqyjCDrrLjsnZjtlZjshLjsmpQuJykNCiAgICAgICAgfSkNCiAgICB9LA0KICAgIC8qIO2VtOuLuSDrhYTrj4Tsl5Ag6re866y07ZWY64qUIOyngeybkCDrpqzsiqTtirggKi8NCiAgICBsb2FkRGF5T2ZmTGlzdDogZnVuY3Rpb24gKCkgew0KICAgICAgdmFyIG1vbnRoID0gbmV3IERhdGUoKS5nZXRNb250aCgpICsgMQ0KICAgICAgYXhpb3MucG9zdCgnL2FwaS92YWNhdGlvbi9zZWxlY3RBbGxNZW1iZXJzRGF5T2ZmTGlzdCcsIHsNCiAgICAgICAgZ2RhdGU6IHRoaXMuc2VsX3NlYXJjaFllYXIgLSAxLA0KICAgICAgICBtb250aDogbW9udGgNCiAgICAgIH0pDQogICAgICAgIC50aGVuKChyZXN1bHQpID0+IHsNCiAgICAgICAgICAvLyBjb25zb2xlLmxvZygnc2VsZWN0QWxsTWVtYmVyc0RheU9mZkxpc3QgcmVzdWx0IDogJywgcmVzdWx0LmRhdGEuZGF0YSkNCiAgICAgICAgICB0aGlzLmRheU9mZkxpc3QgPSByZXN1bHQuZGF0YS5kYXRhDQogICAgICAgIH0pLmNhdGNoKCgpID0+IHsNCiAgICAgICAgICAvLyBjb25zb2xlLmxvZygnZXJyb3InLCBlcnJvcikNCiAgICAgICAgICBhbGVydCgn7Jik66WY6rCAIOuwnOyDne2VmOyYgOyKteuLiOuLpC4g7Iuc7Iqk7YWcIOq0gOumrOyekOyXkOqyjCDrrLjsnZjtlZjshLjsmpQuJykNCiAgICAgICAgfSkNCiAgICB9LA0KICAgIC8qIOyhsO2ajCDsl7Drj4QgKi8NCiAgICBsb2FkQWxsWWVhcjogZnVuY3Rpb24gKCkgew0KICAgICAgYXhpb3MuZ2V0KCcvYXBpL3ZhY2F0aW9uL3NlbGVjdEd1bnRhZVllYXInKQ0KICAgICAgICAudGhlbigocmVzdWx0KSA9PiB7DQogICAgICAgICAgdGhpcy5zZWFyY2hZZWFyID0gcmVzdWx0LmRhdGEuZGF0YQ0KICAgICAgICAgIHRoaXMubG9hZERheU9mZkxpc3QoKQ0KICAgICAgICB9KS5jYXRjaCgoKSA9PiB7DQogICAgICAgICAgLy8gY29uc29sZS5sb2coJ2Vycm9yJywgZXJyb3IpDQogICAgICAgICAgYWxlcnQoJ+yYpOulmOqwgCDrsJzsg53tlZjsmIDsirXri4jri6QuIOyLnOyKpO2FnCDqtIDrpqzsnpDsl5Dqsowg66y47J2Y7ZWY7IS47JqULicpDQogICAgICAgIH0pDQogICAgfQ0KICB9LA0KICBjcmVhdGVkICgpIHsNCiAgICAvLyDtjpjsnbTsp4Ag66Gc65Oc7IucIOq4sOuzuOyekeuPmSDrqZTshozrk5wNCiAgICB0aGlzLmxvYWRBbGxZZWFyKCkNCiAgfQ0KfQ0K"},{"version":3,"sources":["InsertAcnt.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"InsertAcnt.vue","sourceRoot":"src/views/vcode","sourcesContent":["<template>\r\n<div class=\"conts-area\">\r\n    <div class=\"conts-tit\">\r\n    <h2>연도별 휴가 일수 등록</h2>\r\n    </div>\r\n    <div class=\"list-top-area\">\r\n        <label for=\"s1\">년도</label>\r\n        <select id=\"s1\" title=\"select\"  v-model=\"sel_searchYear\" @change=\"loadDayOffList()\">\r\n            <option v-for=\"Y in callYears\" v-bind:key=\"Y.year\" v-bind:value=\"Y\">{{Y}}</option>\r\n        </select>\r\n    <button  type=\"button\" title=\"저장\" class=\"fr btn btn-blue\" v-on:click=\"insertAcnt()\">저장</button>\r\n    </div>\r\n    <div class=\"tbl-area\">\r\n    <!-- table detail start -->\r\n    <table class=\"tbl tb-detail\" id=\"tableId\">\r\n        <caption>디테일 테이블</caption>\r\n        <colgroup>\r\n        <col style=\"width:20%\">\r\n        <col style=\"width:30%\">\r\n        <col style=\"width:50%\">\r\n        </colgroup>\r\n        <thead>\r\n        <tr>\r\n            <th> <input type=\"checkbox\" id=\"editChkAll\" name=\"editChkAll\" true-value=\"Y\" false-value=\"N\" v-on:click=\"clkRow('All')\"> </th>\r\n            <th>성명</th>\r\n            <th>발생일수</th>\r\n        </tr>\r\n        </thead>\r\n        <tbody>\r\n        <tr v-for=\"(v, i) in dayOffList\" v-bind:key=\"v.id\" v-bind:value=\"v.name\">\r\n            <td v-if=\"isHidden[i]\" hidden>\r\n              <input type=\"text\" v-bind:value=\"v.id\" name=\"id\">\r\n            </td>\r\n            <!-- 체크박스 -->\r\n            <td>\r\n                <input type=\"checkbox\" id=\"editChk\" name=\"editChk\" true-value=\"Y\" false-value=\"N\" v-on:click=\"clkRow(i)\" >\r\n            </td>\r\n            <!-- 사원명 -->\r\n            <td  v-if=\"!isHidden[i]\" name=\"name\">\r\n                {{ v.name }}</td>\r\n            <td v-if=\"isHidden[i]\" name=\"name\">\r\n                {{ v.name }}\r\n            </td>\r\n            <!-- 연차 수-->\r\n            <td  v-if=\"!isHidden[i]\">\r\n                {{ v.acnt }}\r\n            </td>\r\n            <td  v-if=\"isHidden[i]\">\r\n                <input type=\"text\" name=\"acnt\" v-bind:placeholder=\"v.acnt\" onKeyup=\"this.value=this.value.replace(/[^0-9]/g,'')\" >\r\n            </td>\r\n\r\n        </tr>\r\n        </tbody>\r\n    </table>\r\n    <!-- table detail end -->\r\n    </div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport moment from 'moment'\r\nexport default {\r\n  name: 'DeptPlando',\r\n  data () {\r\n    return {\r\n      selectedYear: '',\r\n      callYears: [],\r\n      checked: false,\r\n      isHidden: [],\r\n      poJson: [],\r\n      searchYear: [],\r\n      sel_searchYear: moment(new Date()).format('yyyy'),\r\n      visible: false,\r\n      tempData: {\r\n        userId: '',\r\n        userName: '',\r\n        selYear: ''\r\n      },\r\n      dayOffList: {\r\n        eachMember: {\r\n          id: '',\r\n          name: '',\r\n          acnt: '',\r\n          sumMinusDayoff: ''\r\n        }\r\n      }\r\n    }\r\n  },\r\n  mounted: function () {\r\n    this.getCalendarYear()\r\n  },\r\n  methods: {\r\n    getCalendarYear: function () { // 캘린더 년도 정보 가져오기\r\n      axios\r\n        .get('/api/vacation/selectCalendarYear')\r\n        .then(res => {\r\n          const year = new Date().getFullYear()\r\n          for (const i in res.data.data) {\r\n            this.callYears.push(res.data.data[i].year)\r\n            if (String(year) === String(this.callYears[i])) {\r\n              this.callYears.splice(i, 1)\r\n            }\r\n          }\r\n          this.callYears.sort()\r\n          this.callYears.unshift(String(year))\r\n          if (this.callYears[0] !== '') {\r\n            this.sel_searchYear = this.callYears[0]\r\n          }\r\n        }).catch(() => {\r\n          // console.log(error)\r\n          alert('오류가 발생하였습니다. 시스템 관리자에게 문의하세요.')\r\n        })\r\n    },\r\n    // 클릭시 인풋박스로 바뀜\r\n    clkRow: function (i) {\r\n      const editChk = document.getElementsByName('editChk')\r\n      const editChkAll = document.getElementsByName('editChkAll')\r\n      var name = document.getElementsByName('name')\r\n      if (i === 'All') {\r\n        for (let lgh = 0; lgh < name.length; lgh++) {\r\n          this.$set(this.isHidden, lgh, editChkAll[0].checked)\r\n          editChk[lgh].checked = editChkAll[0].checked\r\n        }\r\n      } else {\r\n        this.$set(this.isHidden, i, !this.isHidden[i])\r\n      }\r\n    },\r\n    /* 연차 발생 저장 */\r\n    insertAcnt: function () {\r\n      // console.log('sel_searchYear :: ', this.sel_searchYear)\r\n      var inputAcnt = document.getElementsByName('acnt')\r\n      var inputId = document.getElementsByName('id')\r\n      // console.log('inputAcnt :: ', inputAcnt)\r\n      // console.log('inputAcnt[i].value :: ', inputAcnt[0].value)\r\n      for (var i = 0; i < inputAcnt.length; i++) {\r\n        // console.log('inputId[i].value :: ', inputId[i].value)\r\n        // console.log('inputAcnt[i].value :: ', inputAcnt[i].value)\r\n        var insertAcntList = {\r\n        //   id: this.dayOffList[i].id,\r\n          id: inputId[i].value,\r\n          year: this.sel_searchYear,\r\n          a_cnt: inputAcnt[i].value\r\n        }\r\n        this.poJson.push(insertAcntList)\r\n      }\r\n      axios.post('/api/deptMember/insertAcnt', this.poJson)\r\n        .then((result) => {\r\n          // console.log('selectAllMembersDayOffList result : ', result.data.data)\r\n          this.dayOffList = result.data.data\r\n          window.location.reload()\r\n        }).catch(() => {\r\n          // console.log('error', error)\r\n          alert('오류가 발생하였습니다. 시스템 관리자에게 문의하세요.')\r\n        })\r\n    },\r\n    /* 해당 년도에 근무하는 직원 리스트 */\r\n    loadDayOffList: function () {\r\n      var month = new Date().getMonth() + 1\r\n      axios.post('/api/vacation/selectAllMembersDayOffList', {\r\n        gdate: this.sel_searchYear - 1,\r\n        month: month\r\n      })\r\n        .then((result) => {\r\n          // console.log('selectAllMembersDayOffList result : ', result.data.data)\r\n          this.dayOffList = result.data.data\r\n        }).catch(() => {\r\n          // console.log('error', error)\r\n          alert('오류가 발생하였습니다. 시스템 관리자에게 문의하세요.')\r\n        })\r\n    },\r\n    /* 조회 연도 */\r\n    loadAllYear: function () {\r\n      axios.get('/api/vacation/selectGuntaeYear')\r\n        .then((result) => {\r\n          this.searchYear = result.data.data\r\n          this.loadDayOffList()\r\n        }).catch(() => {\r\n          // console.log('error', error)\r\n          alert('오류가 발생하였습니다. 시스템 관리자에게 문의하세요.')\r\n        })\r\n    }\r\n  },\r\n  created () {\r\n    // 페이지 로드시 기본작동 메소드\r\n    this.loadAllYear()\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n</style>\r\n"]}]}